# üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ MedicalBrothers - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å –ø–æ–ª–Ω—ã–º —Ü–∏–∫–ª–æ–º: **–≥–æ–ª–æ—Å ‚Üí —Ç–µ–∫—Å—Ç ‚Üí AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí —Ç–µ–∫—Å—Ç ‚Üí –≥–æ–ª–æ—Å**.

–ü–∞—Ü–∏–µ–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç ‚Üí —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ä–µ—á—å ‚Üí AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ‚Üí –æ—Ç–≤–µ—Ç –æ–∑–≤—É—á–∏–≤–∞–µ—Ç—Å—è.

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1Ô∏è‚É£ **Speech-to-Text (STT)** - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
- **–°–µ—Ä–≤–∏—Å**: Deepgram API (Nova-2 –º–æ–¥–µ–ª—å)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `@deepgram/sdk` (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è TypeScript SDK)
- **–Ø–∑—ã–∫**: –†—É—Å—Å–∫–∏–π + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è
- **–§–æ—Ä–º–∞—Ç—ã –∞—É–¥–∏–æ**: WAV, MP3, M4A, FLAC, OGG
- **–¢–æ—á–Ω–æ—Å—Ç—å**: ~95% –¥–ª—è —á–∏—Å—Ç–æ–π —Ä–µ—á–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–ê—É–¥–∏–æ—Ñ–∞–π–ª ‚Üí Deepgram API ‚Üí –¢–µ–∫—Å—Ç + —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
```

**Endpoint**: `POST /api/voice/transcribe`

**–ü—Ä–∏–º–µ—Ä:**
```
–í—Ö–æ–¥—è—â–µ–µ –∞—É–¥–∏–æ (–≥–æ–ª–æ—Å): "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 38"
–í—ã—Ö–æ–¥ (—Ç–µ–∫—Å—Ç): "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç—Ä–∏–¥—Ü–∞—Ç—å –≤–æ—Å–µ–º—å –≥—Ä–∞–¥—É—Å–æ–≤."
–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 0.95 (95%)
```

---

### 2Ô∏è‚É£ **AI –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
- **–°–µ—Ä–≤–∏—Å**: OpenAI GPT-4o-mini
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `openai` (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è SDK)
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: Ollama + Qwen 2.5 7B (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤
  - ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
  - ‚úÖ –ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è)
  - ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–Ω–∏–∫–µ
  - ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ (normal/high/emergency)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–¢–µ–∫—Å—Ç –ø–∞—Ü–∏–µ–Ω—Ç–∞ ‚Üí GPT-4o ‚Üí –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
                           + –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
                           + –£—Ä–æ–≤–µ–Ω—å —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
```

**Endpoint**: `POST /api/voice/chat`

**–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞:**
```
–ü–∞—Ü–∏–µ–Ω—Ç: "–Ø —Ö–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É"
AI: "–ö–æ–Ω–µ—á–Ω–æ! –Ø –º–æ–≥—É –ø–æ–º–æ—á—å –∑–∞–ø–∏—Å–∞—Ç—å –≤–∞—Å –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É.
     –ö–∞–∫–æ–π –¥–µ–Ω—å –∏ –≤—Ä–µ–º—è –≤–∞–º —É–¥–æ–±–Ω—ã?"

–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:
- –ù–∞–º–µ—Ä–µ–Ω–∏–µ: –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º ‚úÖ
- –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç: –ö–∞—Ä–¥–∏–æ–ª–æ–≥
- –°—Ä–æ—á–Ω–æ—Å—Ç—å: normal
```

---

### 3Ô∏è‚É£ **Text-to-Speech (TTS)** - –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
- **–°–µ—Ä–≤–∏—Å**: OpenAI TTS API (–º–æ–¥–µ–ª—å TTS-1)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: `openai` (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è SDK)
- **–ì–æ–ª–æ—Å**: Alloy (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π, —á—ë—Ç–∫–∏–π)
- **–Ø–∑—ã–∫**: –†—É—Å—Å–∫–∏–π (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ)
- **–§–æ—Ä–º–∞—Ç**: MP3
- **–°–∫–æ—Ä–æ—Å—Ç—å**: 1.0x (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ AI ‚Üí OpenAI TTS ‚Üí MP3 –∞—É–¥–∏–æ—Ñ–∞–π–ª
```

**Endpoint**: `POST /api/voice/speak`

**–ü—Ä–∏–º–µ—Ä:**
```
–í—Ö–æ–¥—è—â–∏–π —Ç–µ–∫—Å—Ç: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –≤–∞–º –ø–æ–º–æ—á—å?"
–í—ã—Ö–æ–¥: MP3 —Ñ–∞–π–ª —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä—É—Å—Å–∫–æ–π —Ä–µ—á—å—é
```

---

## üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. –ü–ê–¶–ò–ï–ù–¢ –ì–û–í–û–†–ò–¢                                          ‚îÇ
‚îÇ     "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 38"                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. DEEPGRAM STT (Speech-to-Text)                            ‚îÇ
‚îÇ     –ê—É–¥–∏–æ ‚Üí "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 38"           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. AI –ê–ù–ê–õ–ò–ó (OpenAI GPT-4o-mini / Ollama Qwen 2.5)        ‚îÇ
‚îÇ     - –ê–Ω–∞–ª–∏–∑ —Å–∏–º–ø—Ç–æ–º–æ–≤                                       ‚îÇ
‚îÇ     - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –Ω–µ–≤—Ä–æ–ª–æ–≥—É                   ‚îÇ
‚îÇ     - –°—Ä–æ—á–Ω–æ—Å—Ç—å: normal                                      ‚îÇ
‚îÇ     - –û—Ç–≤–µ—Ç: "–ì–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å   ‚îÇ
‚îÇ       –Ω–∞ –≤–∏—Ä—É—Å–Ω—É—é –∏–Ω—Ñ–µ–∫—Ü–∏—é. –†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫          ‚îÇ
‚îÇ       —Ç–µ—Ä–∞–ø–µ–≤—Ç—É –∏–ª–∏ –Ω–µ–≤—Ä–æ–ª–æ–≥—É."                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. OPENAI TTS (Text-to-Speech)                              ‚îÇ
‚îÇ     –¢–µ–∫—Å—Ç ‚Üí MP3 –∞—É–¥–∏–æ—Ñ–∞–π–ª —Å –≥–æ–ª–æ—Å–æ–º                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5. –ü–ê–¶–ò–ï–ù–¢ –°–õ–´–®–ò–¢ –û–¢–í–ï–¢                                     ‚îÇ
‚îÇ     üîä –ì–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|------------|
| **STT** | Deepgram Nova-2 | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–π —Ä–µ—á–∏ |
| **AI (Cloud)** | OpenAI GPT-4o-mini | –û–±–ª–∞—á–Ω—ã–π AI –∞–Ω–∞–ª–∏–∑ |
| **AI (Local)** | Ollama + Qwen 2.5 7B | –õ–æ–∫–∞–ª—å–Ω—ã–π AI (–±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞) |
| **TTS** | OpenAI TTS-1 (Alloy) | –°–∏–Ω—Ç–µ–∑ —Ä—É—Å—Å–∫–æ–π —Ä–µ—á–∏ |
| **Backend** | Next.js 16 API Routes | REST API endpoints |
| **Database** | PostgreSQL + Prisma | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π |
| **Rate Limiting** | Upstash Redis | –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π |

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)

```json
{
  "@deepgram/sdk": "^3.8.0",      // Speech-to-Text
  "openai": "^4.73.1",             // AI + TTS
  "ollama": "^0.5.11",             // –õ–æ–∫–∞–ª—å–Ω—ã–π AI
  "speakeasy": "^2.0.0",           // 2FA (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
  "qrcode": "^1.5.4"               // QR –∫–æ–¥—ã (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
}
```

‚úÖ **–í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç**

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º
```
–ü–∞—Ü–∏–µ–Ω—Ç: "–ó–∞–ø–∏—à–∏—Ç–µ –º–µ–Ω—è –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
AI: "–ö–æ–Ω–µ—á–Ω–æ! –í–∞–º —É–¥–æ–±–Ω–æ —É—Ç—Ä–æ–º –∏–ª–∏ –≤–µ—á–µ—Ä–æ–º?"
–ü–∞—Ü–∏–µ–Ω—Ç: "–£—Ç—Ä–æ–º, –æ–∫–æ–ª–æ 10"
AI: "–û—Ç–ª–∏—á–Ω–æ! –Ø –∑–∞–ø–∏—Å–∞–ª –≤–∞—Å –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00.
     –ê–¥—Ä–µ—Å –∫–ª–∏–Ω–∏–∫–∏: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, 123."
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —Å–∏–º–ø—Ç–æ–º–∞–º
```
–ü–∞—Ü–∏–µ–Ω—Ç: "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≤ –≥—Ä—É–¥–∏"
AI: "–ë–æ–ª—å –≤ –≥—Ä—É–¥–∏ - —Å–µ—Ä—å—ë–∑–Ω—ã–π —Å–∏–º–ø—Ç–æ–º! –†–µ–∫–æ–º–µ–Ω–¥—É—é –°–†–û–ß–ù–û
     –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫–∞—Ä–¥–∏–æ–ª–æ–≥—É –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å —Å–∫–æ—Ä—É—é –ø–æ–º–æ—â—å."
–°—Ä–æ—á–Ω–æ—Å—Ç—å: EMERGENCY üö®
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–Ω–∏–∫–µ
```
–ü–∞—Ü–∏–µ–Ω—Ç: "–ö–∞–∫–∏–µ —É –≤–∞—Å —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã?"
AI: "–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º: –ü–Ω-–ü—Ç 8:00-20:00, –°–±-–í—Å 9:00-18:00.
     –¢–µ–ª–µ—Ñ–æ–Ω: +7 (495) 123-45-67"
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **Rate Limiting**: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–æ–π API
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∞—É–¥–∏–æ –∏ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å**: GDPR-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ)
- ‚ùå **–ù–µ —Å—Ç–∞–≤–∏–º –¥–∏–∞–≥–Ω–æ–∑—ã**: AI –¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥–∞—è –≥–æ–ª–æ—Å–æ–≤–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

```typescript
{
  patientId: 123,                    // ID –ø–∞—Ü–∏–µ–Ω—Ç–∞
  symptoms: "–ë–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞",          // –°–∏–º–ø—Ç–æ–º—ã
  aiResponse: "–†–µ–∫–æ–º–µ–Ω–¥—É—é...",       // –û—Ç–≤–µ—Ç AI
  severityLevel: "normal",           // –°—Ä–æ—á–Ω–æ—Å—Ç—å
  recommendedSpecialty: "–ù–µ–≤—Ä–æ–ª–æ–≥",  // –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç
  createdAt: "2024-01-19T10:30:00Z"  // –í—Ä–µ–º—è
}
```

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç 24/7** - –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚úÖ **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** - 95% —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –æ—Ç–≤–µ—Ç –∑–∞ 2-3 —Å–µ–∫—É–Ω–¥—ã
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–±–ª–∞—á–Ω—ã–µ API –≤—ã–¥–µ—Ä–∂–∞—Ç –Ω–∞–≥—Ä—É–∑–∫—É
‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (Ollama)
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - AI —É—á–∏—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚ùå **–ù–µ –∑–∞–º–µ–Ω—è–µ—Ç –≤—Ä–∞—á–∞** - —Ç–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚ùå **–¢—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–∏** - Deepgram ($0.0043/–º–∏–Ω), OpenAI ($0.015/1K —Ç–æ–∫–µ–Ω–æ–≤)
‚ùå **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ** - —à—É–º —Å–Ω–∏–∂–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å
‚ùå **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –¥–ª–∏–Ω–µ** - OpenAI TTS –¥–æ 4096 —Å–∏–º–≤–æ–ª–æ–≤

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Deepgram STT:
- **Pay-as-you-go**: $0.0043/–º–∏–Ω—É—Ç–∞
- **1000 –º–∏–Ω—É—Ç –≥–æ–ª–æ—Å–∞** = $4.30
- –ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier: $200 –∫—Ä–µ–¥–∏—Ç–æ–≤

### OpenAI (GPT-4o-mini + TTS):
- **GPT-4o-mini**: $0.015 / 1M –≤—Ö–æ–¥—è—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
- **TTS**: $15 / 1M —Å–∏–º–≤–æ–ª–æ–≤
- **100 –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π** ‚âà $0.50

### Ollama (–ª–æ–∫–∞–ª—å–Ω–æ):
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** ‚úÖ
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –¢—Ä–µ–±—É–µ—Ç GPU/CPU –º–æ—â–Ω–æ—Å—Ç–∏

---

## üöÄ API Endpoints (—É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç!)

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| `POST` | `/api/voice/transcribe` | –ì–æ–ª–æ—Å ‚Üí –¢–µ–∫—Å—Ç (STT) |
| `POST` | `/api/voice/speak` | –¢–µ–∫—Å—Ç ‚Üí –ì–æ–ª–æ—Å (TTS) |
| `POST` | `/api/voice/chat` | AI –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —á–∞—Ç |
| `POST` | `/api/ai/chat` | AI —á–∞—Ç (Ollama –ª–æ–∫–∞–ª—å–Ω–æ) |

**Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:3000/api/docs

---

## üéì –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

```typescript
// 1. –ó–∞–ø–∏—Å–∞—Ç—å –≥–æ–ª–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const audioBlob = await recordAudio();

// 2. –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä–µ—á—å ‚Üí —Ç–µ–∫—Å—Ç
const formData = new FormData();
formData.append('audio', audioBlob);
const { transcript } = await fetch('/api/voice/transcribe', {
  method: 'POST',
  body: formData
}).then(r => r.json());

// 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ AI –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
const { response, specialty, isAppointmentRequest } = await fetch('/api/voice/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ message: transcript })
}).then(r => r.json());

// 4. –û–∑–≤—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç AI
const audioResponse = await fetch('/api/voice/speak', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ text: response })
});
const audioBlob = await audioResponse.blob();
const audioUrl = URL.createObjectURL(audioBlob);
new Audio(audioUrl).play(); // üîä –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º
```

---

## ‚úÖ –í—ã–≤–æ–¥ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è

### **–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –†–ï–ê–õ–ò–ó–û–í–ê–ù –∏ –†–ê–ë–û–¢–ê–ï–¢:**

1. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
   - Deepgram SDK (–ª–∏–¥–µ—Ä –≤ STT)
   - OpenAI SDK (GPT-4 + TTS)
   - Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π AI)

2. ‚úÖ **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª**: –ì–æ–ª–æ—Å ‚Üí AI ‚Üí –ì–æ–ª–æ—Å

3. ‚úÖ **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**:
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
   - –ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º

4. ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å**:
   - Rate limiting
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - Error handling

5. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**:
   - –û–±–ª–∞—á–Ω—ã–π —Ä–µ–∂–∏–º (OpenAI)
   - –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (Ollama)

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**:
–ì–æ–ª–æ—Å–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **–≥–æ—Ç–æ–≤ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏** –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ. –í—Å–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, API endpoints –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ**: MedicalBrothers Team
**–î–∞—Ç–∞**: –ù–æ—è–±—Ä—å 2024
**–í–µ—Ä—Å–∏—è**: 1.0
